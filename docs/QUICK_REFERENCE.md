# ⚡ 快速參考卡

## 🚀 立即開始

```bash
# 1. 安裝依賴
pip install -r requirements.txt

# 2. 啟動程式
start_controller.bat
# 或
python integrated_controller.py
```

## 🎮 基本操作

### 連接機械手臂
1. 選擇 COM 埠
2. 點擊「連接」
3. 等待 2 秒初始化

### 即時控制
- 拖曳滑桿 → 手臂同步移動
- 觀察 DH 參數與末端位置

### 軌跡規劃
1. 調整到位置 A → 記錄
2. 調整到位置 B → 記錄
3. 點擊「規劃路徑」
4. 切換到「執行」標籤
5. 點擊「開始執行」

### 視覺監控
1. 切換到「視覺監控」標籤
2. 點擊「開啟攝影機」
3. 調整 HSV 參數檢測紅點

## 📐 重要參數

| 參數 | 數值 | 說明 |
|------|------|------|
| 伺服範圍 | 20-160° | 硬體限制 |
| 初始位置 | 90° | 所有軸 |
| Serial 鮑率 | 115200 | Arduino 通訊 |
| 軌跡間隔 | 500ms | 執行速度 |
| IK 精度 | <5mm | 逆運動學誤差 |

## 🔧 命令格式

### Python → Arduino
```
90,45,120,60\n
```
表示：軸1=90°, 軸2=45°, 軸3=120°, 軸4=60°

### Arduino → Python
```
OK: Motor angles set
```

## 🎯 DH 參數速查

| 關節 | θ | d | a | α | 控制 |
|------|---|---|---|---|------|
| 1 | θ₁ | 77 | 0 | 90° | 伺服1 |
| 2 | θ₂+90 | 0 | 105 | 0° | 伺服2 (反向) |
| 3 | θ₃ | 0 | 98 | 0° | 伺服3 |
| 4 | θ₄ | 0 | 76 | 0° | 伺服4 (反向) |
| 5 | -90 | 163 | 0 | 0° | 末端校正 |

## 🐛 快速故障排除

### 無法連接
```bash
# 檢查 COM 埠
mode  # Windows

# 檢查 Arduino 是否已上傳韌體
# 重新插拔 USB
```

### 手臂不動
- 檢查電源供應
- 檢查 PCA9685 連接
- 查看日誌訊息

### 逆運動學失敗
- 目標太遠（超出工作空間）
- 查看日誌中的錯誤訊息

### 紅點檢測不到
- 調整 H 值（0-10 或 170-179）
- 提高環境亮度
- 使用更鮮豔的紅色貼紙

## 📁 檔案位置

```
主程式          integrated_controller.py
運動學模組      kinematics_control.py
Arduino 韌體    robot_arm_with_opencv.ino
主文件          README.md
開發文件        docs/DEVELOPMENT.md
專案結構        docs/PROJECT_STRUCTURE.md
```

## 🧪 測試命令

```bash
# 測試正向運動學
python tests/debug_fk.py

# 測試逆向運動學
python tests/test_simple_ik.py

# 完整測試
python tests/test_kinematics.py
```

## ⌨️ 快捷鍵（未來可擴充）

- `Ctrl+C` - 緊急停止
- `Space` - 暫停/繼續（執行標籤）
- `Esc` - 停止執行

## 📊 系統架構速覽

```
使用者操作 → PyQt5 介面 → Serial 通訊 → Arduino → PCA9685 → 伺服馬達
                ↓
         運動學計算 ← DH 參數
                ↓
         3D 視覺化顯示
```

## 🎨 HSV 預設值（紅色）

```
H: 0-10 或 170-179  (色相)
S: 100-255          (飽和度)
V: 100-255          (亮度)
```

## 💡 快速提示

- **首次使用**：先測試單軸移動，確認方向正確
- **規劃軌跡**：從簡單 2 點開始，再增加複雜度
- **視覺監控**：在良好光源下使用，背景避免紅色
- **安全第一**：執行前確保手臂周圍無障礙物

## 📞 獲取幫助

1. 查看 `README.md` 完整說明
2. 閱讀 `docs/DEVELOPMENT.md` 開發文件
3. 檢查日誌訊息（介面右下角）
4. 建立 GitHub Issue

---

**版本：** v2.0 | **更新：** 2025-12-01
